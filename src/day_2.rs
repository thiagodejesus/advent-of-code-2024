use std::collections::HashMap;

#[derive(PartialEq, Clone, Debug, Eq, Hash)]
enum Change {
    Increasing,
    Decreasing,
    Unchanged,
}

impl Change {
    fn new(last: &i32, actual: &i32) -> Change {
        let difference = actual - last;

        if difference > 0 {
            Change::Increasing
        } else if difference < 0 {
            Change::Decreasing
        } else {
            Change::Unchanged
        }
    }
}

fn analyze_reports(reports: Vec<Vec<i32>>, tolerance: i32) -> i32 {
    let mut safe = 0;

    reports.iter().for_each(|report| {
        let mut appearences = HashMap::<Change, i32>::new();
        // Iterates over the x first report levels, where x is tolerance + 1, to determine the tendency
        report.iter().enumerate().for_each(|(i, level)| {
            if i == 0 {
                return;
            }

            let last = report[i - 1];

            let change = Change::new(&last, level);

            appearences
                .entry(change)
                .and_modify(|i| *i += 1)
                .or_insert(1);
        });

        let report_change_tendency = appearences
            .iter()
            .max_by(|a, b| a.1.cmp(&b.1))
            .map(|(k, _v)| k)
            .unwrap();

        if report_change_tendency == &Change::Unchanged {
            // Unsafe
            return;
        }

        let mut error_count = 0;
        let mut successful_processed: Vec<i32> = vec![];
        let is_safe = report.iter().enumerate().try_for_each(|(i, level)| {
            if i == 0 {
                successful_processed.push(level.clone());
                return Ok(());
            }

            let last = successful_processed
                .last()
                .expect("Should always have one when the code comes here")
                .clone();

            let difference = level - last;

            let change = Change::new(&last, level);

            let before_last = {
                if i >= 2 {
                    let before_last = successful_processed.get(i - 2);
                    match before_last {
                        None => None,
                        Some(v) => Some(v.clone()),
                    }
                } else {
                    None
                }
            };
            let next = report.get(i + 1);

            if &change != report_change_tendency {
                if error_count < tolerance {
                    error_count += 1;

                    if next.is_none() {
                        return Ok(())
                    } else {
                        let last_change_to_next = Change::new(&last, next.unwrap());
                        if &last_change_to_next == report_change_tendency {
                            return Ok(())
                        } else {
                            successful_processed.pop();
                            successful_processed.push(level.clone());
                            return Ok(())
                        }
                    }

                }
                return Err(format!(
                    "ReportChange: ChangeTendency: {:?} | at level {} | with last {}",
                    report_change_tendency, level, last
                ));
            }

            if difference.abs() > 3 {
                if error_count < tolerance {
                    error_count += 1;

                    // Check between the current level and the next what is the one that most deviates from the report to remove it
                    let mut last_deviation = 0;
                    let mut actual_deviation = 0;

                    // Gives preference to get the deviation based on the lasts
                    if before_last.is_some() {
                        match before_last {
                            None => {}
                            Some(before_last) => {
                                last_deviation += (before_last - last).abs();
                                actual_deviation += (before_last - level).abs();
                            }
                        }
                    } else {
                        match next {
                            Some(next) => {
                                last_deviation += (next - last).abs();
                                actual_deviation += (next - level).abs();
                            }
                            None => {}
                        }
                    }

                    if actual_deviation > last_deviation {
                        return Ok(());
                    } else {
                        successful_processed.pop();
                        successful_processed.push(level.clone());
                        return Ok(());
                    }
                }
                return Err(format!("Distance, {}", level));
            }


            let r = successful_processed.iter().try_for_each(|l| {
                match report_change_tendency {
                    Change::Decreasing => {
                        if level >= l {
                            return Err(())
                        }
                    },
                    Change::Increasing => {
                        if level <= l {
                            return Err(())
                        }
                    }
                    Change::Unchanged => {

                    }
                }

                Ok(())
            });

            if r.is_err() {
                if error_count < tolerance {
                    error_count += 1;
                }
                return Err("".to_string());
            }

            successful_processed.push(level.clone());
            return Ok(());
        });

        match is_safe {
            Ok(_) => safe += 1,
            Err(l) => {
                println!("Report: {:?} error {:?}", report, l);
            }
        }
    });

    safe
}

fn part_1(reports: Vec<Vec<i32>>) -> i32 {
    analyze_reports(reports, 0)
}

fn part_2(reports: Vec<Vec<i32>>) -> i32 {
    analyze_reports(reports, 1)
}

pub fn second_day_challenge() {
    let input = vec![
        vec![75,76,77,80,82,85,84],
        vec![49,52,53,55,58,59,61,61],
        vec![54,57,60,62,66],
        vec![4,6,8,10,11,14,19],
        vec![82,85,86,83,85,87,89],
        vec![85,86,87,86,89,88],
        vec![69,72,73,76,77,74,75,75],
        vec![4,6,4,5,8,11,15],
        vec![6,9,10,12,15,16,15,20],
        vec![41,43,43,45,48,51],
        vec![48,51,53,53,56,58,59,58],
        vec![67,69,71,74,74,77,77],
        vec![82,83,85,85,89],
        vec![21,24,26,26,29,31,36],
        vec![4,7,10,11,15,18,20,21],
        vec![56,58,60,63,65,69,70,68],
        vec![24,26,30,32,33,35,35],
        vec![12,13,15,17,20,24,25,29],
        vec![52,53,54,57,58,59,63,68],
        vec![43,46,48,55,58,59],
        vec![15,16,23,26,27,28,26],
        vec![49,50,53,56,59,64,64],
        vec![56,58,59,65,69],
        vec![3,5,6,8,13,18],
        vec![45,44,46,47,50,52,54],
        vec![37,35,36,37,34],
        vec![53,50,51,53,54,56,56],
        vec![80,78,79,80,81,83,86,90],
        vec![32,31,34,37,40,45],
        vec![76,75,77,79,77,80],
        vec![26,25,22,24,23],
        vec![27,26,23,24,25,25],
        vec![96,93,96,93,97],
        vec![37,34,35,36,39,36,38,45],
        vec![68,65,66,67,67,70,72],
        vec![41,39,42,42,43,40],
        vec![88,86,89,90,90,91,93,93],
        vec![24,23,25,26,26,28,32],
        vec![79,77,77,80,83,88],
        vec![50,48,50,52,55,58,62,63],
        vec![39,38,39,41,45,47,48,45],
        vec![40,38,41,42,44,45,49,49],
        vec![50,49,53,56,60],
        vec![74,73,77,80,86],
        vec![40,37,38,39,42,48,49,50],
        vec![12,11,17,20,22,23,25,23],
        vec![74,71,73,75,80,83,83],
        vec![20,17,23,25,29],
        vec![32,30,37,39,42,48],
        vec![80,80,83,86,87],
        vec![73,73,76,78,80,83,85,82],
        vec![19,19,22,25,28,30,32,32],
        vec![43,43,46,49,53],
        vec![69,69,72,75,80],
        vec![24,24,25,22,25,27],
        vec![60,60,58,61,64,65,62],
        vec![52,52,50,51,53,55,55],
        vec![56,56,59,56,60],
        vec![37,37,38,36,38,45],
        vec![7,7,9,12,12,13,14,16],
        vec![52,52,55,57,57,56],
        vec![89,89,89,91,91],
        vec![7,7,7,10,13,15,17,21],
        vec![43,43,44,47,50,50,52,58],
        vec![4,4,5,9,10,11,14,17],
        vec![11,11,13,17,15],
        vec![7,7,11,14,14],
        vec![55,55,58,62,64,66,70],
        vec![75,75,78,79,81,85,88,94],
        vec![56,56,63,64,67],
        vec![5,5,7,10,12,13,18,16],
        vec![32,32,38,41,43,44,47,47],
        vec![36,36,43,44,48],
        vec![9,9,12,17,22],
        vec![11,15,16,18,20,21,23,26],
        vec![50,54,55,57,60,62,64,61],
        vec![86,90,92,94,95,95],
        vec![84,88,90,93,97],
        vec![3,7,9,12,15,21],
        vec![36,40,41,44,47,46,47,50],
        vec![39,43,45,43,46,47,50,47],
        vec![84,88,90,87,90,90],
        vec![2,6,7,4,6,10],
        vec![31,35,34,35,36,39,45],
        vec![11,15,15,16,18],
        vec![1,5,7,9,11,14,14,13],
        vec![54,58,60,60,63,63],
        vec![52,56,58,60,60,64],
        vec![61,65,65,66,71],
        vec![48,52,55,56,60,61],
        vec![77,81,84,88,89,86],
        vec![58,62,63,66,67,71,74,74],
        vec![71,75,78,81,82,84,88,92],
        vec![82,86,87,91,98],
        vec![41,45,48,50,55,58,61],
        vec![70,74,77,78,83,86,88,85],
        vec![71,75,82,84,84],
        vec![19,23,30,31,35],
        vec![59,63,70,72,77],
        vec![45,51,53,55,56],
        vec![8,14,16,19,17],
        vec![46,52,55,58,58],
        vec![71,77,79,82,84,87,88,92],
        vec![68,75,77,80,87],
        vec![29,35,38,35,36,38,39],
        vec![34,39,38,41,43,45,42],
        vec![26,33,35,34,36,39,41,41],
        vec![85,92,95,92,96],
        vec![33,38,40,39,40,41,48],
        vec![83,89,92,93,93,94,95,96],
        vec![85,92,95,95,97,96],
        vec![54,59,59,60,61,62,64,64],
        vec![27,34,35,37,37,41],
        vec![69,75,77,79,81,81,86],
        vec![25,30,31,32,36,38],
        vec![51,58,62,63,64,63],
        vec![54,61,62,65,69,72,74,74],
        vec![59,66,68,69,73,76,79,83],
        vec![14,19,20,24,30],
        vec![33,40,42,48,51,52],
        vec![28,33,36,37,42,45,43],
        vec![44,50,55,58,58],
        vec![14,21,22,29,30,34],
        vec![35,40,43,49,52,53,59],
        vec![63,61,58,56,54,51,53],
        vec![52,49,46,45,45],
        vec![74,72,69,68,67,63],
        vec![80,77,74,73,72,67],
        vec![77,74,76,73,70,68,67],
        vec![20,17,16,15,17,19],
        vec![45,42,41,38,36,35,38,38],
        vec![55,54,56,53,49],
        vec![20,18,17,15,14,16,10],
        vec![17,14,14,12,10,8,6],
        vec![72,71,69,68,66,66,63,65],
        vec![31,30,30,27,26,25,24,24],
        vec![51,49,48,48,47,43],
        vec![26,24,24,21,20,14],
        vec![19,18,14,13,10,8],
        vec![84,81,80,76,78],
        vec![47,45,41,38,35,35],
        vec![68,67,64,60,56],
        vec![74,71,68,66,62,60,54],
        vec![43,41,38,36,33,27,26],
        vec![63,60,53,51,54],
        vec![29,28,23,20,17,16,14,14],
        vec![46,45,42,39,34,31,30,26],
        vec![23,21,19,13,11,5],
        vec![27,29,26,24,23,22,19],
        vec![86,88,86,83,81,79,81],
        vec![57,59,57,54,52,50,47,47],
        vec![21,24,21,18,14],
        vec![61,63,62,61,59,57,50],
        vec![96,99,97,98,96,95,92],
        vec![66,69,71,69,71],
        vec![41,43,42,39,37,40,37,37],
        vec![79,82,85,84,80],
        vec![77,79,77,78,73],
        vec![22,24,24,22,20],
        vec![63,66,64,64,66],
        vec![19,22,22,21,18,18],
        vec![95,97,97,95,93,91,87],
        vec![32,33,31,29,29,28,25,18],
        vec![42,44,43,39,38,36,34,31],
        vec![27,29,27,24,22,18,20],
        vec![20,22,18,15,15],
        vec![68,69,65,63,59],
        vec![79,81,77,76,73,72,67],
        vec![68,70,69,63,62,60,59,56],
        vec![42,44,39,36,33,36],
        vec![88,90,87,82,81,79,79],
        vec![66,69,66,59,58,54],
        vec![70,71,70,68,66,60,54],
        vec![77,77,76,74,72,71,69,66],
        vec![43,43,40,37,34,33,36],
        vec![21,21,20,18,18],
        vec![34,34,32,29,27,25,22,18],
        vec![79,79,78,76,73,66],
        vec![89,89,92,90,88],
        vec![77,77,75,73,72,73,76],
        vec![84,84,83,85,85],
        vec![30,30,28,26,23,22,25,21],
        vec![22,22,25,23,21,20,15],
        vec![66,66,66,64,63,62,60,57],
        vec![75,75,73,70,67,67,68],
        vec![33,33,33,30,27,25,22,22],
        vec![55,55,52,50,50,46],
        vec![40,40,38,38,37,32],
        vec![63,63,62,58,55],
        vec![95,95,94,90,92],
        vec![87,87,85,82,78,78],
        vec![88,88,84,83,79],
        vec![85,85,83,79,73],
        vec![53,53,51,44,42],
        vec![12,12,7,5,4,6],
        vec![53,53,48,47,44,44],
        vec![35,35,32,25,22,18],
        vec![46,46,39,36,34,27],
        vec![26,22,21,19,18,15],
        vec![91,87,86,85,83,85],
        vec![24,20,17,15,14,14],
        vec![66,62,60,57,54,50],
        vec![67,63,62,60,59,57,51],
        vec![41,37,35,38,37,36,33,31],
        vec![18,14,15,12,9,8,5,8],
        vec![37,33,32,30,29,30,30],
        vec![70,66,64,63,60,61,58,54],
        vec![34,30,28,26,23,26,24,18],
        vec![28,24,22,19,16,16,15],
        vec![54,50,50,48,47,44,41,43],
        vec![82,78,75,75,75],
        vec![38,34,34,33,30,29,25],
        vec![52,48,47,46,46,43,37],
        vec![20,16,15,13,11,10,6,5],
        vec![57,53,51,47,48],
        vec![89,85,83,79,78,76,76],
        vec![28,24,23,21,17,16,15,11],
        vec![87,83,79,78,77,74,73,66],
        vec![63,59,58,56,49,48],
        vec![87,83,81,74,75],
        vec![43,39,37,31,31],
        vec![80,76,75,73,66,62],
        vec![48,44,43,41,34,27],
        vec![53,46,43,41,38,37,34],
        vec![60,55,52,49,46,45,48],
        vec![56,50,48,46,43,40,37,37],
        vec![93,86,85,84,82,80,76],
        vec![20,15,14,11,10,3],
        vec![73,67,64,63,60,58,59,58],
        vec![55,49,47,45,47,49],
        vec![15,10,9,8,7,9,9],
        vec![44,37,39,37,35,33,31,27],
        vec![94,87,84,87,80],
        vec![67,60,60,58,56],
        vec![72,66,63,63,60,57,60],
        vec![69,62,60,60,57,55,55],
        vec![17,10,8,6,6,2],
        vec![93,88,87,87,82],
        vec![40,33,31,27,26],
        vec![58,52,51,50,47,45,41,43],
        vec![87,82,81,77,77],
        vec![56,50,47,43,42,40,38,34],
        vec![86,79,77,75,71,68,62],
        vec![95,88,86,83,82,76,73],
        vec![78,73,71,64,65],
        vec![61,56,51,48,47,47],
        vec![68,63,58,56,54,50],
        vec![25,19,14,13,6],
        vec![49,51,52,54,51],
        vec![93,94,95,96,96],
        vec![23,24,26,28,29,31,34,38],
        vec![83,85,87,88,89,95],
        vec![66,68,67,68,70],
        vec![14,15,14,17,15],
        vec![6,8,6,8,10,10],
        vec![35,36,39,36,40],
        vec![38,39,36,39,46],
        vec![10,11,13,13,16,19],
        vec![23,25,28,29,31,31,28],
        vec![63,66,67,67,67],
        vec![67,70,70,73,77],
        vec![34,36,39,41,41,42,48],
        vec![85,87,89,93,94,96],
        vec![91,92,95,99,98],
        vec![17,19,22,26,28,28],
        vec![55,58,60,64,65,69],
        vec![78,80,84,87,89,91,97],
        vec![5,7,8,14,15,16,19],
        vec![2,4,6,9,12,17,19,18],
        vec![33,35,40,43,44,44],
        vec![1,4,11,13,17],
        vec![40,41,43,50,52,59],
        vec![67,66,68,69,72],
        vec![40,37,39,40,39],
        vec![56,55,58,61,61],
        vec![33,31,32,34,37,39,40,44],
        vec![58,57,58,60,61,63,65,70],
        vec![9,8,7,8,11],
        vec![41,39,37,39,42,43,41],
        vec![59,58,61,62,65,67,64,64],
        vec![92,91,94,95,92,93,95,99],
        vec![89,87,88,86,89,95],
        vec![81,79,79,82,84,87,90,93],
        vec![75,73,75,75,74],
        vec![11,10,11,13,13,14,14],
        vec![87,85,88,88,92],
        vec![63,62,65,67,70,70,76],
        vec![53,50,54,56,59,60,62],
        vec![7,5,8,11,15,18,21,20],
        vec![94,91,92,96,96],
        vec![62,60,63,67,71],
        vec![9,8,11,14,16,20,26],
        vec![63,61,66,67,68,71,74],
        vec![49,47,48,55,52],
        vec![29,26,28,31,38,41,42,42],
        vec![49,48,51,57,60,64],
        vec![65,64,67,74,76,79,84],
        vec![32,32,35,38,41,44,45],
        vec![80,80,81,82,85,88,85],
        vec![77,77,79,80,81,82,82],
        vec![78,78,81,82,86],
        vec![26,26,28,30,33,35,42],
        vec![91,91,92,90,91,92],
        vec![96,96,93,94,93],
        vec![73,73,72,74,76,76],
        vec![89,89,91,90,92,96],
        vec![22,22,20,23,29],
        vec![36,36,37,38,39,39,41,44],
        vec![87,87,90,92,94,96,96,94],
        vec![55,55,55,58,59,59],
        vec![33,33,33,35,37,41],
        vec![76,76,78,81,83,83,86,92],
        vec![71,71,75,76,77,79],
        vec![60,60,64,66,63],
        vec![8,8,11,15,18,20,21,21],
        vec![20,20,24,26,28,29,32,36],
        vec![23,23,27,30,35],
        vec![28,28,33,36,38,41,43],
        vec![45,45,46,48,50,55,53],
        vec![3,3,4,5,10,10],
        vec![72,72,74,75,78,83,85,89],
        vec![44,44,50,52,58],
        vec![1,5,7,10,12],
        vec![83,87,89,92,94,96,93],
        vec![74,78,81,84,86,87,87],
        vec![73,77,78,80,82,85,88,92],
        vec![47,51,52,55,57,59,64],
        vec![7,11,12,9,12,15,17],
        vec![50,54,55,52,54,51],
        vec![35,39,36,38,41,44,44],
        vec![89,93,91,92,94,98],
        vec![31,35,32,33,35,36,41],
        vec![60,64,64,67,68],
        vec![18,22,25,25,23],
        vec![48,52,55,55,55],
        vec![39,43,43,46,50],
        vec![17,21,23,26,29,29,32,37],
        vec![33,37,40,44,47],
        vec![23,27,31,33,35,34],
        vec![64,68,72,73,74,74],
        vec![20,24,25,29,32,36],
        vec![46,50,53,57,60,62,65,70],
        vec![60,64,67,74,77,79],
        vec![51,55,56,63,64,65,68,65],
        vec![14,18,23,26,27,30,32,32],
        vec![40,44,50,53,55,58,59,63],
        vec![30,34,36,37,38,44,51],
        vec![43,50,53,55,56,58],
        vec![63,68,69,70,69],
        vec![63,69,70,72,72],
        vec![34,40,41,43,46,47,49,53],
        vec![40,45,47,49,51,57],
        vec![6,13,15,18,15,17,19],
        vec![4,10,11,9,10,11,8],
        vec![27,34,37,40,42,41,43,43],
        vec![76,82,85,83,86,90],
        vec![22,27,26,27,34],
        vec![47,53,53,55,58],
        vec![52,59,59,61,63,65,68,66],
        vec![17,23,26,27,30,30,31,31],
        vec![16,23,26,29,29,32,36],
        vec![52,57,60,60,63,66,73],
        vec![23,29,30,34,36],
        vec![4,11,13,17,14],
        vec![20,25,26,30,32,34,34],
        vec![62,69,73,76,77,81],
        vec![34,41,44,48,50,55],
        vec![47,53,55,61,63],
        vec![40,45,48,51,57,60,61,59],
        vec![68,75,81,83,86,87,90,90],
        vec![68,74,77,82,83,86,90],
        vec![49,54,55,61,62,64,65,71],
        vec![60,57,56,54,53,50,51],
        vec![97,94,93,92,90,88,86,86],
        vec![67,64,62,61,57],
        vec![74,72,71,68,65,59],
        vec![97,94,95,92,91,90,89],
        vec![72,70,68,67,66,68,69],
        vec![76,73,70,67,66,63,64,64],
        vec![30,29,26,25,28,25,22,18],
        vec![77,76,74,75,69],
        vec![88,85,82,82,80],
        vec![73,72,69,67,64,61,61,62],
        vec![61,60,58,58,55,55],
        vec![47,46,43,43,42,41,37],
        vec![16,15,13,12,12,10,3],
        vec![26,25,23,19,16],
        vec![71,68,66,62,60,59,56,57],
        vec![55,52,50,46,45,42,41,41],
        vec![96,93,92,88,87,86,82],
        vec![87,84,80,77,74,73,68],
        vec![42,39,36,33,32,25,23],
        vec![93,92,91,88,86,80,79,81],
        vec![87,86,85,84,77,77],
        vec![84,83,80,79,74,73,70,66],
        vec![94,91,90,83,76],
        vec![8,9,8,5,2],
        vec![15,17,16,15,13,10,13],
        vec![75,78,77,75,74,73,73],
        vec![50,51,49,47,45,41],
        vec![60,63,61,58,51],
        vec![8,10,9,10,9,8,5,3],
        vec![51,54,52,49,52,50,48,50],
        vec![46,49,52,50,48,48],
        vec![27,30,28,30,28,26,22],
        vec![53,54,56,55,54,51,44],
        vec![52,55,52,52,49,46,44,43],
        vec![76,79,78,78,80],
        vec![59,60,58,57,54,53,53,53],
        vec![28,30,29,27,27,23],
        vec![22,23,20,20,17,14,9],
        vec![53,56,55,53,49,47,45,43],
        vec![67,70,66,63,65],
        vec![84,87,85,81,78,76,76],
        vec![47,48,47,43,42,38],
        vec![27,28,25,21,20,15],
        vec![75,77,72,70,69],
        vec![19,20,18,17,14,9,7,10],
        vec![53,55,48,47,44,44],
        vec![94,95,89,87,86,85,83,79],
        vec![93,95,89,88,86,81],
        vec![28,28,27,26,23],
        vec![21,21,18,17,16,19],
        vec![68,68,66,63,62,60,57,57],
        vec![70,70,68,65,61],
        vec![21,21,20,19,17,15,13,6],
        vec![33,33,31,30,32,31,28],
        vec![32,32,29,31,28,25,28],
        vec![20,20,18,15,12,9,10,10],
        vec![25,25,22,24,22,18],
        vec![92,92,95,93,86],
        vec![12,12,11,9,6,4,4,3],
        vec![45,45,43,40,37,37,40],
        vec![4,4,3,3,3],
        vec![8,8,7,7,6,2],
        vec![14,14,12,10,9,7,7,1],
        vec![18,18,16,14,11,9,5,3],
        vec![31,31,27,26,23,20,21],
        vec![31,31,29,26,22,21,21],
        vec![48,48,46,45,43,42,38,34],
        vec![93,93,90,88,86,85,81,74],
        vec![30,30,27,22,20],
        vec![92,92,87,85,88],
        vec![77,77,75,74,71,69,62,62],
        vec![25,25,23,20,17,16,10,6],
        vec![82,82,76,75,74,67],
        vec![20,16,14,12,10,8,7,6],
        vec![50,46,44,42,39,41],
        vec![78,74,71,68,68],
        vec![54,50,47,45,42,41,37],
        vec![99,95,92,91,89,82],
        vec![74,70,71,70,68,65],
        vec![55,51,50,52,49,52],
        vec![72,68,66,67,65,65],
        vec![33,29,30,27,24,22,21,17],
        vec![71,67,64,67,61],
        vec![51,47,44,42,42,39],
        vec![63,59,59,56,53,55],
        vec![81,77,75,73,73,71,71],
        vec![22,18,18,15,13,9],
        vec![80,76,76,73,66],
        vec![54,50,46,43,40],
        vec![87,83,82,78,75,73,71,74],
        vec![14,10,9,5,5],
        vec![37,33,29,26,25,22,20,16],
        vec![94,90,88,86,85,81,76],
        vec![45,41,39,32,30],
        vec![83,79,78,73,74],
        vec![94,90,89,88,83,83],
        vec![46,42,39,36,34,27,26,22],
        vec![22,18,13,10,5],
        vec![44,37,34,31,30],
        vec![51,45,44,42,41,44],
        vec![30,24,21,20,19,17,15,15],
        vec![59,53,50,47,43],
        vec![30,25,24,23,18],
        vec![52,47,49,46,43,41,40],
        vec![36,31,28,29,26,23,20,21],
        vec![13,7,10,8,7,4,4],
        vec![82,75,74,73,71,68,69,65],
        vec![77,70,68,67,68,67,60],
        vec![17,12,10,8,7,6,6,3],
        vec![83,76,73,72,71,71,72],
        vec![84,78,77,76,75,75,75],
        vec![54,49,48,47,45,45,41],
        vec![90,84,83,81,78,78,72],
        vec![63,58,54,51,50,47,45],
        vec![39,33,29,27,28],
        vec![83,78,74,71,71],
        vec![74,68,65,63,59,56,52],
        vec![41,35,32,30,26,19],
        vec![42,35,34,32,25,23,20],
        vec![45,40,39,38,36,35,29,31],
        vec![62,55,52,51,49,48,43,43],
        vec![61,56,55,49,47,45,41],
        vec![58,51,49,47,41,38,32],
        vec![57,56,54,54,53,50,53],
        vec![62,61,64,61,63,64,68],
        vec![43,38,38,35,32,30,24],
        vec![76,80,84,87,89,90,92,92],
        vec![56,60,62,69,72],
        vec![55,49,48,51,50,53],
        vec![77,73,72,69,65],
        vec![35,32,33,35,37,41,46],
        vec![92,89,86,82,81,84],
        vec![85,81,83,82,79,77,75,75],
        vec![59,56,53,50,47,47,44,41],
        vec![46,50,52,54,53,54,54],
        vec![76,75,78,81,81,82,82],
        vec![85,78,71,70,68],
        vec![51,48,49,51,58,59,57],
        vec![31,33,36,33,34,38],
        vec![51,47,44,40,37,36,31],
        vec![61,60,65,66,69,73],
        vec![10,10,11,12,13,17],
        vec![1,7,8,9,15,21],
        vec![70,71,73,74,75,78,79,83],
        vec![32,35,33,34,35,38],
        vec![35,40,41,38,40,42,49],
        vec![51,50,47,45,42,41,34],
        vec![52,52,49,50,49],
        vec![21,20,18,15,14,12,11],
        vec![37,39,42,43,44,46,49,52],
        vec![73,76,78,81,82,83,86,88],
        vec![17,19,20,22,24],
        vec![90,88,86,84,81,80,77],
        vec![76,75,74,71,68,66,63,62],
        vec![42,41,39,38,37,36,33,30],
        vec![96,93,91,90,87],
        vec![18,20,23,24,25,28],
        vec![46,49,51,52,55],
        vec![48,45,42,41,40,39],
        vec![71,69,66,64,61],
        vec![25,22,19,18,17],
        vec![43,46,49,52,55,58,60],
        vec![48,46,43,42,40,39,38,35],
        vec![68,69,72,73,74],
        vec![88,89,90,93,95],
        vec![68,71,72,73,76,78,80,82],
        vec![87,89,91,93,94,95],
        vec![93,92,91,90,88,86,83,80],
        vec![43,41,39,37,34,31],
        vec![98,95,94,92,89,86],
        vec![92,91,90,89,86,84,83],
        vec![84,82,81,79,76],
        vec![40,39,38,35,32,31,29],
        vec![79,77,75,72,70,69],
        vec![33,32,31,29,26,24,22,19],
        vec![76,73,72,71,68,67],
        vec![79,81,82,83,84,87],
        vec![70,68,65,64,63,60],
        vec![58,55,52,51,49,46],
        vec![17,18,21,22,23],
        vec![73,74,75,76,79],
        vec![97,96,93,90,89,86,83,81],
        vec![20,21,24,25,26,27],
        vec![51,54,56,59,62,65],
        vec![66,69,71,72,73],
        vec![24,22,21,18,16],
        vec![52,51,50,48,45,43,42,41],
        vec![64,61,59,56,54],
        vec![45,43,41,40,37],
        vec![92,89,87,85,82,81,78,75],
        vec![34,36,39,41,44,46,48,49],
        vec![65,66,69,71,74,76],
        vec![84,85,88,91,93,96],
        vec![43,42,41,40,39],
        vec![57,58,60,63,66,68,69],
        vec![35,36,38,41,42,43,45,46],
        vec![54,57,58,60,63],
        vec![76,79,82,85,86,89,90],
        vec![53,54,56,57,60],
        vec![89,86,83,82,79],
        vec![97,94,91,90,88,85,84,81],
        vec![64,65,66,68,69,70],
        vec![26,25,22,19,16,14,12],
        vec![49,46,44,43,42,40],
        vec![25,23,22,19,17],
        vec![95,94,91,88,87,86,83,82],
        vec![15,18,20,22,24,25,26],
        vec![13,11,8,5,4,3],
        vec![14,12,11,8,7,4,3],
        vec![40,38,36,35,33,30,27],
        vec![30,28,25,22,21,18,17],
        vec![22,23,25,26,29,31,33,34],
        vec![96,93,91,88,87,84],
        vec![89,86,84,81,79,77],
        vec![61,59,57,54,53,50,48],
        vec![84,83,82,81,78,75],
        vec![58,56,54,51,49,48,46,45],
        vec![87,84,83,82,81,80,79,78],
        vec![27,26,24,23,21,18],
        vec![13,15,17,20,21,24,25,28],
        vec![29,30,33,34,37,40],
        vec![65,64,62,61,60],
        vec![46,45,43,42,39,37],
        vec![62,64,66,69,72,74],
        vec![3,5,8,10,13],
        vec![74,77,80,81,83,84,87],
        vec![82,83,86,87,90,92,94],
        vec![80,78,75,72,70,69,67],
        vec![17,14,13,11,8,6],
        vec![39,38,37,35,34,31,30,27],
        vec![65,68,69,71,72],
        vec![27,24,23,22,20,17,16],
        vec![8,9,10,13,15,18],
        vec![89,87,86,84,83],
        vec![79,76,75,74,71,69,66,63],
        vec![20,18,15,13,12,11,10,9],
        vec![11,12,14,15,17,20,22],
        vec![99,98,96,93,90],
        vec![29,30,32,33,35,37],
        vec![71,73,76,79,82,83,84],
        vec![63,62,60,57,56],
        vec![84,82,79,77,74,73,70],
        vec![61,62,64,67,68,71,74],
        vec![36,33,31,29,26],
        vec![78,75,73,72,70],
        vec![63,61,58,56,55,52,49,48],
        vec![26,27,28,30,32,35],
        vec![56,54,53,51,49],
        vec![63,61,59,56,55],
        vec![75,76,78,79,82,84,86,89],
        vec![56,54,53,50,47,46,44],
        vec![27,26,23,22,21,20,17,15],
        vec![79,81,84,86,89,92],
        vec![88,85,82,79,78,77,76,74],
        vec![92,89,87,84,83],
        vec![98,95,93,90,89,88],
        vec![19,16,14,11,8,5],
        vec![67,69,70,73,76],
        vec![13,16,17,20,21,23,26,27],
        vec![94,93,92,91,90],
        vec![40,38,36,34,32],
        vec![6,7,9,11,13,15,16],
        vec![52,53,54,56,57,58,60,62],
        vec![46,45,43,41,40,37,36],
        vec![66,64,61,59,58],
        vec![15,18,19,21,23,25,26,28],
        vec![57,58,61,62,64,65,68,71],
        vec![79,80,83,85,87,89,90],
        vec![55,56,59,60,61,63,65],
        vec![40,38,37,34,31,29,28,26],
        vec![6,9,12,14,15,17,20],
        vec![23,22,19,17,15],
        vec![82,83,84,85,86,88,90],
        vec![48,46,44,41,38,36,34],
        vec![55,56,58,60,62,65],
        vec![82,84,87,88,91,93,95],
        vec![5,7,8,9,10,11,13,15],
        vec![43,41,39,37,36,35],
        vec![17,19,20,21,24],
        vec![42,45,48,50,53,54,55],
        vec![57,56,55,53,50,47],
        vec![46,45,44,43,42],
        vec![18,15,13,12,10,9],
        vec![28,26,25,23,22,20,19,18],
        vec![17,14,13,12,11,8,7,6],
        vec![91,94,96,97,99],
        vec![57,54,53,50,48,46,44],
        vec![54,52,49,48,46],
        vec![22,20,19,18,16,15,13,11],
        vec![49,48,45,42,41],
        vec![59,61,64,67,70,73,75,77],
        vec![27,25,23,20,18],
        vec![26,27,28,30,31,34],
        vec![37,38,40,42,44,47,48],
        vec![91,88,86,85,84,82,80],
        vec![35,34,33,30,27],
        vec![5,8,11,12,13,14,16,19],
        vec![35,33,32,31,30,29],
        vec![37,36,35,34,31,29,26],
        vec![16,14,13,10,8],
        vec![17,19,21,22,23,24,25],
        vec![54,56,57,58,60,62,63,66],
        vec![8,10,12,14,17],
        vec![16,14,11,8,5],
        vec![48,45,42,39,37,36,33,31],
        vec![8,11,14,17,20,22,25,26],
        vec![91,89,88,87,85,82],
        vec![26,24,22,21,20,17,16],
        vec![44,41,38,36,33,30,27,24],
        vec![6,8,11,14,16,19],
        vec![75,77,78,81,82,85,88,91],
        vec![63,65,67,68,69,72,73],
        vec![95,93,92,91,88],
        vec![70,68,66,65,64,63,61,60],
        vec![83,84,85,88,91,94],
        vec![57,56,53,50,47,44],
        vec![37,40,43,45,47,48,49],
        vec![81,82,83,85,87,90],
        vec![73,71,69,67,66,64,63,62],
        vec![78,81,84,85,86,87],
        vec![89,86,85,82,80,79],
        vec![58,59,61,62,63,66,67,70],
        vec![14,13,12,10,8],
        vec![99,97,96,94,93,91,90,87],
        vec![62,60,59,58,56,55],
        vec![79,80,83,85,86,88,91,93],
        vec![73,72,70,67,66,65,64],
        vec![11,10,9,8,7],
        vec![25,28,30,32,33],
        vec![56,58,61,63,66,68,69],
        vec![56,54,51,48,46,44,42,40],
        vec![73,76,79,80,82,83],
        vec![79,81,84,87,90],
        vec![27,28,31,34,36,39],
        vec![54,56,59,62,65,68,71,72],
        vec![37,40,43,45,48],
        vec![70,73,75,77,78,80,83],
        vec![84,85,88,90,91,92],
        vec![18,15,13,10,7,5,4,2],
        vec![92,90,88,85,83],
        vec![43,41,38,36,34,31,29,28],
        vec![32,29,27,25,22,19],
        vec![24,25,26,28,31,34],
        vec![3,6,9,12,13,16,19,20],
        vec![47,50,53,55,56,58,59],
        vec![36,38,40,41,44,47],
        vec![72,74,76,78,79,80,83],
        vec![13,16,19,21,23,24,26],
        vec![54,55,57,58,59,62,63,64],
        vec![29,32,33,35,38,41,44],
        vec![82,80,79,76,75],
        vec![60,61,64,67,70],
        vec![38,35,33,31,29,28,25,23],
        vec![87,90,93,94,95,97],
        vec![56,58,60,63,66],
        vec![49,51,54,57,59,62,65],
        vec![56,54,51,50,48,45],
        vec![74,73,72,69,67,65,62,61],
        vec![39,41,44,46,49,52],
        vec![38,35,32,29,26],
        vec![39,37,34,32,31,29,26,24],
        vec![37,35,33,30,29],
        vec![17,20,22,24,25],
        vec![13,14,16,18,20,23,26],
        vec![72,73,74,75,78],
        vec![95,94,91,89,87,84,82],
        vec![60,62,65,66,68],
        vec![58,60,62,64,65],
        vec![93,91,90,88,87,86,83,80],
        vec![38,41,44,46,48,50,51,54],
        vec![57,56,53,51,48,46,45],
        vec![24,26,27,28,31,34],
        vec![94,92,91,88,85,82,79,78],
        vec![96,93,90,88,86,85,84,81],
        vec![17,19,22,25,26,29,32],
        vec![69,68,66,63,62,59,57],
        vec![15,16,17,18,20,22,25],
        vec![41,44,45,48,51,53,56],
        vec![37,40,42,44,47,50,52,53],
        vec![49,48,46,43,41],
        vec![6,9,12,13,14,16,17,18],
        vec![51,53,55,58,59,60,63,66],
        vec![58,61,62,63,66,68,69,71],
        vec![76,75,74,71,68,66],
        vec![1,4,6,7,8,9],
        vec![48,51,52,53,54,57],
        vec![35,32,29,28,25,23,21],
        vec![16,15,12,11,9,7,4],
        vec![39,42,44,46,48],
        vec![51,52,55,56,58,60,62,65],
        vec![75,74,71,69,66],
        vec![73,71,68,65,62,61,59,57],
        vec![47,46,45,43,41,38,37],
        vec![69,72,75,76,79,80],
        vec![27,29,30,32,35,37],
        vec![96,93,91,88,85],
        vec![62,60,58,57,55],
        vec![54,55,56,58,60,61,62],
        vec![93,92,91,90,87,86,84],
        vec![64,65,68,70,72,75],
        vec![21,23,26,29,31,34],
        vec![23,20,18,17,16],
        vec![69,68,65,63,60,57,55],
        vec![65,67,68,70,73,74],
        vec![20,21,22,24,27,30,32],
        vec![55,57,60,61,63,65,66],
        vec![89,91,92,94,97,98],
        vec![80,82,83,84,87,90,93,96],
        vec![88,89,90,92,95],
        vec![57,59,61,62,64,66,67],
        vec![42,41,38,36,33,32,29],
        vec![77,76,75,74,72,70,68,67],
        vec![24,21,18,17,15],
        vec![91,90,88,87,85],
        vec![6,7,9,10,11,13,15,16],
        vec![97,94,91,88,87,86],
        vec![32,31,29,28,27],
        vec![21,20,19,16,13,10,9],
        vec![41,44,47,50,52,53,56],
        vec![65,63,61,58,55,53,50,48],
        vec![60,57,55,52,49,47,45,44],
        vec![91,90,87,86,85,84,82],
        vec![54,55,58,61,62,63,66,69],
        vec![50,51,52,55,56,59,62],
        vec![46,49,51,52,55,57],
        vec![48,46,45,42,39],
        vec![56,54,51,49,47,46,44,41],
        vec![70,68,65,64,61,58,56,54],
        vec![50,51,54,57,59],
        vec![20,21,22,24,25],
        vec![53,55,58,61,64,67,68],
        vec![5,7,9,11,13],
        vec![78,77,74,71,70],
        vec![15,17,20,23,25,26,29,31],
        vec![90,88,86,83,81],
        vec![36,35,32,31,28],
        vec![10,9,7,5,3,2],
        vec![43,41,38,36,33],
        vec![4,6,7,10,13,15],
        vec![62,60,58,56,53,51,50],
        vec![20,17,15,12,9,7,4],
        vec![43,46,47,50,52],
        vec![19,17,15,12,10,9,8],
        vec![50,47,44,42,39,38,37],
        vec![60,59,56,53,52,49,48],
        vec![45,43,41,39,36,33,30],
        vec![84,82,81,78,77,75],
        vec![57,59,62,63,65,67,70],
        vec![43,46,48,51,53,55],
        vec![73,72,71,68,67,64,61,58],
        vec![23,26,29,30,33,36,37],
        vec![52,49,47,44,43,41],
        vec![60,57,55,53,52],
        vec![50,52,53,56,58,60],
        vec![75,74,73,72,69],
        vec![77,75,72,69,66,64,63],
        vec![11,13,16,19,22,25],
        vec![67,64,61,59,58,56,55,53],
        vec![78,77,74,73,71,69,67,64],
        vec![70,67,65,63,62,59],
        vec![17,16,13,11,9,6,4,1],
        vec![5,7,8,9,11,14,15],
        vec![62,61,60,59,56,55],
        vec![15,12,10,9,7],
        vec![22,24,26,27,30,33,35],
        vec![82,84,86,87,89],
        vec![36,37,40,43,44,45,48],
        vec![34,33,32,30,29,27,26,25],
        vec![29,30,33,34,35,38,40],
        vec![84,86,88,89,91,92,94,96],
        vec![67,64,63,60,57,56,53],
        vec![62,64,66,69,70,71],
        vec![25,26,29,31,33,34],
        vec![40,37,36,33,30,29,26],
        vec![68,66,65,63,62,59,57,55],
        vec![53,55,57,59,60],
        vec![42,45,47,48,51,53,55],
        vec![65,66,67,68,69],
        vec![36,34,31,29,28,25,24],
        vec![75,78,81,83,84,85],
        vec![63,60,59,57,54,53,50,49],
        vec![13,10,9,7,5,4,2],
        vec![35,38,40,41,43,46,48],
        vec![19,21,22,25,28,29,32],
        vec![67,65,63,62,60],
        vec![45,48,51,52,54],
        vec![59,61,63,64,65,68,69],
        vec![9,10,11,12,14,16,19,20],
        vec![85,86,87,88,90,92,95,98],
        vec![10,9,7,5,4],
        vec![9,7,5,2,1],
        vec![1,2,3,6,9,12,13,16],
        vec![4,7,8,11,13,15,17,20],
        vec![74,76,77,80,82,85,87,90],
        vec![15,17,18,21,22,24],
        vec![45,48,50,51,54,57],
        vec![90,92,94,97,98],
        vec![49,46,43,42,41,38,37,34],
        vec![21,18,16,13,12,10,7,6],
        vec![9,11,14,16,17,19,20,22],
        vec![40,39,36,33,31,30,29],
        vec![21,22,23,24,25],
        vec![81,79,76,74,73,70,69,67],
        vec![16,14,13,12,11,10,9],
        vec![76,79,80,81,84,85,88],
        vec![90,88,87,85,84,83,80],
        vec![99,96,94,92,90,87,84],
        vec![21,24,25,27,30],
        vec![67,69,71,74,77,79],
        vec![54,56,57,58,59,61,62,64],
        vec![60,63,66,67,70],
        vec![77,79,81,83,84,86,88],
        vec![65,62,59,56,55,53,52,51],
        vec![57,58,59,61,62,65,67],
        vec![64,62,60,59,56,55],
        vec![12,14,16,17,19,20],
        vec![64,66,68,69,71,73],
        vec![12,11,10,9,8,7,6],
        vec![68,65,64,63,61],
        vec![24,21,20,17,16,13,10,7],
        vec![54,53,51,50,48],
        vec![99,96,93,91,90,87,84],
        vec![56,57,60,63,66,69,71],
        vec![78,77,76,73,71],
        vec![58,56,53,51,48,47],
        vec![12,13,16,17,20,22],
        vec![49,52,54,57,60],
        vec![72,74,76,78,79,81],
        vec![29,28,25,23,21,19],
        vec![29,28,26,25,24,23,20],
        vec![62,65,68,70,71,74,75,78],
        vec![63,61,59,57,54,52],
        vec![22,23,26,29,31,33,34,37],
        vec![41,44,45,48,49,50,52],
        vec![26,24,23,21,18],
        vec![18,21,22,24,27,30,33,36],
        vec![8,11,13,15,16,19],
        vec![31,34,35,38,40,42,44,45],
        vec![37,34,33,31,29,27],
        vec![81,79,76,73,71,69,68],
        vec![70,72,73,74,77,80],
        vec![88,89,92,94,96],
        vec![13,15,18,19,21,22,25,26],
        vec![63,64,65,67,70,72],
        vec![45,42,39,37,35,33,31,30],
        vec![42,45,47,49,51,52],
        vec![24,25,26,29,31,34],
        vec![55,52,49,47,46,44,43,40],
        vec![87,86,84,82,81],
        vec![33,31,29,26,23,21],
        vec![45,42,39,38,37],
        vec![79,77,75,74,71,70,68],
        vec![41,42,43,45,48],
        vec![59,61,64,66,68,69,72,73],
        vec![78,76,74,71,69,68],
        vec![76,75,72,70,67,66],
        vec![81,84,86,88,91,94,95],
        vec![11,10,7,5,4,2],
        vec![84,82,79,78,77,75,72,71],
        vec![26,25,22,20,17,15],
        vec![28,29,31,32,35,36],
        vec![29,26,23,21,19,18,16],
        vec![17,18,20,23,26,28,30,31],
        vec![12,10,8,5,2,1],
        vec![80,79,78,76,73,71,70],
        vec![61,64,65,66,69,71,73],
        vec![84,86,89,92,94,95,97,99],
        vec![76,77,78,80,81,83],
        vec![76,73,71,68,66],
        vec![81,83,84,85,87],
        vec![59,60,62,64,66,67,70,73],
        vec![29,31,34,37,38,39],
        vec![71,73,74,77,79,81,82],
        vec![13,16,19,20,23,24,25,28],
        vec![15,14,12,10,7,6,5,3],
        vec![41,43,45,47,50,53,55,56],
        vec![13,15,16,19,22],
        vec![73,76,77,79,82,84,87],
        vec![31,32,35,36,38,40],
        vec![31,28,26,24,23,21],
        vec![48,46,43,42,41,38,35,32],
        vec![27,26,24,23,22,20,17],
        vec![58,55,53,52,50,49,48,47],
        vec![2,5,6,9,12,15,18],
        vec![37,38,40,41,44,45,48,50],
        vec![53,50,49,46,45],
        vec![15,14,11,9,8,7,6,4],
        vec![9,8,7,6,4,2],
        vec![32,33,34,36,39,40],
        vec![85,82,79,78,76,73,70,67],
        vec![52,55,56,58,60,61],
        vec![59,56,55,52,51],
        vec![88,89,90,92,94],
        vec![19,18,17,14,13],
        vec![42,40,37,35,32],
        vec![34,35,38,39,42,44,45],
        vec![47,49,51,54,56,58,60,62],
        vec![38,37,35,33,32,30],
        vec![48,45,42,40,37,36,35,33],
        vec![14,15,18,21,23,26],
        vec![76,75,72,69,67,65,62,59],
        vec![21,24,26,28,31,32],
        vec![50,53,56,57,58,61],
        vec![29,28,26,25,22,19,16,15],
        vec![77,79,81,84,86,87],
        vec![20,18,17,15,13,10,9,6],
        vec![64,65,67,68,70],
        vec![20,19,17,16,14],
        vec![78,80,81,84,86],
        vec![87,88,90,92,93],
        vec![32,34,37,39,41,43,45,48],
        vec![95,92,90,87,86],
        vec![76,74,72,71,68],
        vec![77,75,74,71,69,68],
        vec![67,69,72,73,76,79,80,82],
        vec![92,90,88,85,84,83,81,78],
        vec![40,37,35,33,30],
        vec![59,58,56,53,51],
        vec![45,43,41,39,38],
        vec![61,64,67,68,70],
        vec![30,28,25,24,21,19,18,17],
        vec![76,78,80,83,86],
        vec![85,88,89,90,91,92],
        vec![43,42,40,37,35,33,31,29],
        vec![69,71,74,75,77,80],
        vec![53,56,59,61,63,65,67,70],
        vec![48,45,43,41,38,37,34],
    ];

    let test_input = vec![
        vec![48, 46, 47, 49, 51, 54, 56],
        vec![1, 1, 2, 3, 4, 5],
        vec![1, 2, 3, 4, 5, 5],
        vec![5, 1, 2, 3, 4, 5],
        vec![1, 4, 3, 2, 1],
        vec![1, 6, 7, 8, 9],
        vec![1, 2, 3, 4, 3],
        vec![9, 8, 7, 6, 7],
        vec![7, 10, 8, 10, 11],
        vec![29, 28, 27, 25, 26, 25, 22, 20],
        vec![7, 6, 4, 2, 1],
        vec![1, 3, 2, 4, 5],
        vec![8, 6, 4, 4, 1],
        vec![1, 3, 6, 7, 9],
        vec![82, 85, 86, 83, 87, 88, 89],
        vec![82, 85, 88, 86, 87, 89, 90],
        vec![82, 85, 88, 86, 87, 88, 90],
        vec![82, 85, 87, 86, 87, 88, 90],
        vec![1, 2, 7, 8, 9],              // Wrong
        vec![9, 7, 6, 2, 1],              // Wrong
        vec![82, 85, 86, 83, 85, 87, 89], // Wrong
    ];

    // let test_input = vec![
    // ];

    // println!(
    //     "Part 1: Amount of reports safe is: {}",
    //     part_1(input.clone())
    // );
    println!("Part 2: Amount of reports safe is: {}", part_2(test_input));
}
